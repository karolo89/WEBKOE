{"title":"Unlocking Insights with Tables: Exploring the Palmer Penguins Dataset","markdown":{"yaml":{"title":"Unlocking Insights with Tables: Exploring the Palmer Penguins Dataset","author":"Karol Orozco","date":"02/06/2023","image":"featured.png"},"headingText":"Meet the Palmer penguins","containsRefs":false,"markdown":"\n\n\nIn this article, we explore the use of tables in data analysis and visualization. We will be working with the Palmer penguins dataset, which provides information about penguin species, their characteristics, and measurements.\n\n![Palmer penguins](featured.png) The Palmer Archipelago penguins. Artwork by @allison_horst.\n\nFirst, we start by preparing the data, ensuring that any missing values are removed. We create two tables: table_count, which displays the count of penguins by species and sex, and df, which calculates the mean measurements for each species and sex.\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(warning=FALSE, message=FALSE)\n\nlibrary(tidyverse)\nlibrary(dplyr)\nlibrary(palmerpenguins)\n\n\n# prep data\npenguins <- penguins %>%\n  drop_na()\n\n\ntable_count <- penguins%>%\n  group_by(species, sex)%>%\n  summarize(count= n())%>%\n  select(species, sex, count)\n\ndf <- penguins%>%\n  group_by(species, sex) %>% \n  summarize(across(where(is.numeric), mean, na.rm = TRUE))%>% \n  dplyr::mutate_if(is.numeric, round, 2)\n\n\ntable <- dplyr::left_join(df, table_count, by= c(\"species\", \"sex\"))\n\ntable<- table%>%\n  select(\"species\", \"sex\", \"count\", \"bill_length_mm\", \"bill_depth_mm\", \"flipper_length_mm\", \"body_mass_g\")%>%\n  rename(Culmen_Length = bill_length_mm , \n         Culmen_Depth = bill_depth_mm,  \n         Flipper_Length= flipper_length_mm, \n         Body_Mass= body_mass_g,\n         Count = count,\n         Sex= sex,\n         Penguin= species)\n```\n\n## Riding Tables with DT\n\nNext, we utilize the DT package to create an interactive datatable. The table includes options for selecting rows, columns, or individual cells, providing an intuitive way to explore the data. Additionally, we add a caption to the table, acknowledging the data source.\n\n```{r}\nlibrary(DT)\n\ndatatable(table,\n\nextensions = c('Select', 'Buttons'), options = list(\n    select = list(style = 'os', items = 'row'),\n    dom = 'Blfrtip',\n    rowId = 0,\n    buttons = c('selectAll', 'selectNone', 'selectRows', 'selectColumns', 'selectCells')\n  ),\n  selection = 'none',\n    \n          caption = htmltools::tags$caption(\n    style = 'caption-side: bottom; text-align: center;',\n    'Table 1: ', htmltools::em('Data were collected and made available by Dr. Kristen Gorman and the Palmer Station, Antarctica LTER, a member of the Long Term Ecological Research Network.')\n  ))\n\n```\n\n## Riding Tables with gt & gtExtra\n\nWe then introduce another approach using the gt and gtExtras packages. With gt, we create a stylish table that groups the data by penguin species. We customize the table's appearance, adding headers, footnotes, and source notes. The table is visually enhanced with different row colors representing each penguin species.\n\nGreat Resource: [Modify the table output options](https://gt.rstudio.com/reference/tab_options.html)\n\n```{r}\n\nlibrary(gt)\nlibrary(gtExtras)\nlibrary(downloadthis)\nlibrary(emo)\n\nattach_excel <- table %>%\n  download_this(\n    output_name = \"Penguins\",\n    output_extension = \".xlsx\", # Excel file type\n    button_label = \"Download Excel\",\n    button_type = \"primary\", # change button type\n  )\n\ntable%>%\n  group_by(Penguin)%>%\n  gt(rowname_col = \"Sex\") %>%\n\n  tab_header(\n    title = md(paste0(\n      emo::ji(\"penguin\"), emo::ji(\"penguin\"), emo::ji(\"penguin\"),\n      \"Penguins are fun to summarize!\",\n      emo::ji(\"penguin\"), emo::ji(\"penguin\"), emo::ji(\"penguin\"))),\n  # Use markdown syntax with md()\n    subtitle = md(\"The palmerpenguins: Palmer Archipelago (Antarctica) penguin data\"))%>%\n  \n  \ntab_footnote(\n    footnote = \"Measurements in millimeters (mm)\", \n    locations = cells_column_labels(\n      columns = 4:6 # note\n      ))%>% \n  \ntab_footnote(\n    footnote = \"Measurements in gram (g)\", \n    locations = cells_column_labels(\n      columns = 7:7 # note\n      ))%>% \n  tab_source_note(source_note = \"Data were collected and made available by Dr. Kristen Gorman and the Palmer Station, Antarctica LTER, a member of the Long Term Ecological Research Network. | Table: Karol Orozco\")%>% \n  \n tab_options(\n    row_group.border.top.width = px(3),\n    row_group.border.top.color = \"gray\",\n    row_group.border.bottom.color = \"gray\",\n    \n    table_body.hlines.color = \"white\",\n    table.border.top.color = \"white\",\n    table.border.top.width = px(3),\n    table.border.bottom.color = \"white\",\n    table.border.bottom.width = px(3),\n    \n    column_labels.border.bottom.color = \"gray\",\n    column_labels.border.bottom.width = px(2),\n    column_labels.background.color = \"black\",\n    \n    heading.background.color = \"#eebf00\",\n    heading.border.bottom.color = \"#eebd00\",\n    heading.border.bottom.width = \"5px\")%>% \n  \n  tab_style(\n    style = cell_text(color = \"white\"),\n    locations = list(\n      cells_row_groups(),\n      cells_column_labels(everything())))%>%\n  \n   tab_style(\n    locations = cells_row_groups(groups = \"Adelie\"),\n    style = cell_fill(color = \"darkorange\"))%>%\n  \n   tab_style(\n    locations = cells_row_groups(groups = \"Chinstrap\"),\n    style = cell_fill(color = \"darkorchid\"))%>%\n  \n   tab_style(\n    locations = cells_row_groups(groups = \"Gentoo\"),\n    style = cell_fill(color = \"cyan4\"))%>%\n\n  \n  tab_source_note(attach_excel)\n\n\n```\n\n### Adding Images\n\nTo further enrich the table, we include images of the penguin species using the gtExtras package. Each penguin species is associated with its representative image, providing a visual representation alongside the data. The resulting table is visually appealing and informative.\n\n```{r}\ndf3 <- penguins%>%\n  group_by(species) %>% \n  summarize(across(where(is.numeric), mean, na.rm = TRUE))%>% \n  dplyr::mutate_if(is.numeric, round, 2)  %>%\n  rename(Culmen_Length = bill_length_mm , \n         Culmen_Depth = bill_depth_mm,  \n         Flipper_Length= flipper_length_mm, \n         Body_Mass= body_mass_g,\n         Penguin= species)%>%\n  mutate(Photo = case_when(\n    str_detect(Penguin,'Adelie') ~ \"https://github.com/karolo89/karolo_website/blob/main/viz/Table/adellie.png?raw=true\", \n    str_detect(Penguin,'Chinstrap') ~ \"https://github.com/karolo89/karolo_website/blob/main/viz/Table/chinstrap.png?raw=true\",\n    str_detect(Penguin,'Gentoo') ~ \"https://github.com/karolo89/karolo_website/blob/main/viz/Table/gentoo.png?raw=true\"))%>%\n  \n  select(\"Photo\", \"Penguin\", \"Culmen_Length\", \"Culmen_Depth\", \"Flipper_Length\", \"Body_Mass\")\n\ndf3\n```\n\n```{r}\ndf3 %>%\n  gt()%>%\n  tab_header(\n    title =  \"Penguins are fun to summarize!\")%>%\n  gtExtras::gt_theme_nytimes()%>%\n  # Add flag images\n  gtExtras::gt_img_rows(columns = Photo, height = 20)%>%\n  opt_align_table_header(align = \"center\")%>% \n  tab_source_note(source_note = \"Data were collected and made available by Dr. Kristen Gorman and the Palmer Station, Antarctica LTER, a member of the Long Term Ecological Research Network. | Table: Karol Orozco\")%>% \n  \n tab_options(\n\n    table_body.hlines.color = \"white\",\n    table.border.top.color = \"white\",\n    table.border.top.width = px(3),\n    table.border.bottom.color = \"white\",\n    table.border.bottom.width = px(3),\n    \n    column_labels.border.bottom.color = \"gray\",\n    column_labels.border.bottom.width = px(2),\n    column_labels.background.color = \"black\",\n    \n    heading.background.color = \"cyan4\",\n    heading.border.bottom.color = \"cyan4\",\n    heading.border.bottom.width = \"5px\")\n \n```\n\nIn conclusion, tables are a powerful tool for presenting and analyzing data. By utilizing packages such as DT, gt, and gtExtras, we can create interactive and visually appealing tables that enhance the understanding of complex datasets.\n\n## Reference\n\nHorst AM, Hill AP, Gorman KB (2020). palmerpenguins: Palmer Archipelago (Antarctica) penguin data. R package version 0.1.0. https://allisonhorst.github.io/palmerpenguins/. doi: 10.5281/zenodo.3960218."},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"table.html"},"language":{"code-summary":"Behind the Scenes"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.313","editor":"visual","citations-hover":true,"footnotes-hover":true,"theme":{"light":"../../../LightTheme.css","dark":"DarkTheme.scss"},"code-copy":true,"title-block-banner":true,"title":"Unlocking Insights with Tables: Exploring the Palmer Penguins Dataset","author":"Karol Orozco","date":"02/06/2023","image":"featured.png"},"extensions":{"book":{"multiFile":true}}}}}