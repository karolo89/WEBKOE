"0",""
"0","# Load fonts"
"0","font_add_google(""Roboto Slab"", ""slab"")"
"0","font_add_google(""Roboto"", ""roboto"")"
"0","showtext_auto()"
"0",""
"0",""
"0","# Read data"
"0","df <- tibble(year = c(1800, 1900, 2020),"
"0","             percent_die = c(43.3, 36.2, 3.9))"
"0",""
"0","# Prepare data"
"0","df_data <- df %>%"
"0","  mutate(per_hundred = round(percent_die),"
"0","         survive = (100 - per_hundred),"
"0","         facet_label = paste0(year, "" ("", survive, ""%)"")) %>%"
"0","  pivot_longer(cols = 3:4, values_to = ""perc"", names_to = ""type"") %>%"
"0","  select(-percent_die)"
"0",""
"0","plot_data_grid <- rep_df(expand.grid(x = rep(1:10), y = rep(1:10)), length(unique(df_data$facet_label))) %>%"
"0","  mutate(year = rep(unique(df_data$facet_label), each = 100),"
"0","         label = fontawesome('fa-user'),"
"0","         type = rep(df_data$type, times = df_data$perc))"
"0",""
"0","# Create plot"
"0","p <- ggplot() +"
"0","  geom_text(data = plot_data_grid,"
"0","            mapping = aes(x = x,"
"0","                          y = y,"
"0","                          label = label,"
"0","                          colour = type),"
"0","            family = 'fontawesome-webfont', size = 12) +"
"0","  facet_wrap(~year) +"
"0","  scale_colour_manual(values = c(""lightgray"",""#3D5A80""),"
"0","                      labels = c(""Survive"", ""Perish""),"
"0","                      name = ""Outcome"") +"
"0","  labs(title = ""Child Mortality Rates Continue to Fall"","
"0","       subtitle = str_wrap_break(""What Percentage of Children Live Beyond Their Fifth Birthday?\n\n"", 70),"
"0","       caption = ""Karol O. | Data: ourworldindata.org"","
"0","       x = """","
"0","       y = """") +"
"0","  theme_minimal() +"
"0","  theme(panel.spacing = unit(2, ""lines""),"
"0","        plot.background = element_rect(fill = ""white"", colour = ""white""),"
"0","        panel.background = element_rect(fill = ""white"", colour = ""white""),"
"0","        strip.background = element_rect(fill = ""white"", colour = ""white""),"
"0","        strip.text = element_text(colour = '#3D5A80', family = ""slab"", size = 16),"
"0","        plot.title = element_text(colour = ""#3D5A80"", size = 24, hjust = 0.5, family = ""slab""),"
"0","        plot.subtitle = element_text(colour = ""#404040"", size = 16, hjust = 0.5, family = ""slab""),"
"0","        plot.caption = element_text(colour = ""#404040"", size = 14, hjust = 0.01, family = ""slab""),"
"0","        plot.margin = unit(c(1, 1, 1, 1), ""cm""),"
"0","        legend.position = ""none"","
"0","        panel.grid.major = element_blank(),"
"0","        panel.grid.minor = element_blank(),"
"0","        axis.text = element_blank()) +"
"0","   "
"0","  guides(colour = guide_legend(override.aes = list(size = 6)))"
"0",""
"0","# Adjust figure size and save as PNG"
"0","ggsave(""child_mortality.png"", p, width = 10, height = 6, dpi = 300)"
"0",""
"0",""
"0","p"
