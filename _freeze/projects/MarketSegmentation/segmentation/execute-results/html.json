{
  "hash": "6536ce9428a30ab2ac5ba72bbc59b400",
  "result": {
    "markdown": "---\ntitle: \"Market Segmentation Analysis\"\nauthor: \"Orozco Karol M.\"\nimage: customer.jpg\ndate: \"06-30-2023\"\nformat:\n  html:\n    toc: true\n    toc-location: right\n    html-math-method: katex\n    page-layout: full\nexecute: \n  warning: false\n  message: false\ncategories: [R, Machine Learning, Prediction]\n---\n\n\n## Introduction\n\nThe purpose of this business report is to provide an overview of a project that analyzed a customer database from a mall. The project aimed to uncover underlying patterns in the customer base and group customers into segments, known as market segmentation. By understanding these segments, the marketing team can adopt a more targeted approach to reach consumers, and the mall can make informed strategic decisions to increase profits.\n\n## Dataset and Methods Used\n\nThe dataset used in this analysis is a customer database from a mall, containing 200 observations with basic information such as age, gender, annual income, and spending score. The analysis was performed using the R programming language. Exploratory data analysis, descriptive statistics, data visualization, and unsupervised machine learning techniques (K-Means Clustering) were employed to achieve the project objectives.\n\n## Project Highlights\n\nThe project yielded several important highlights and insights:\n\n#### Load the required packages and dataset\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(factoextra)\nlibrary(dplyr)\nlibrary(ClusterR)\nlibrary(eclust)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncustomer_data <- read.csv(\"https://raw.githubusercontent.com/karolo89/WEBKOE/main/projects/MarketSegmentation/Mall_Customers.csv\")\n\n# Current column names\ncurrent_col_names <- colnames(customer_data)\n\n# New column names\nnew_col_names <- c(\"CustomerID\", \"Gender\", \"Age\", \"AnnualIncome\", \"SpendingScore\")\n\n# Assign the new column names to the data frame\ncolnames(customer_data) <- new_col_names\n\ncustomer_data <- customer_data%>%\n  select(-CustomerID)\nsummary(customer_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    Gender               Age         AnnualIncome    SpendingScore  \n Length:200         Min.   :18.00   Min.   : 15.00   Min.   : 1.00  \n Class :character   1st Qu.:28.75   1st Qu.: 41.50   1st Qu.:34.75  \n Mode  :character   Median :36.00   Median : 61.50   Median :50.00  \n                    Mean   :38.85   Mean   : 60.56   Mean   :50.20  \n                    3rd Qu.:49.00   3rd Qu.: 78.00   3rd Qu.:73.00  \n                    Max.   :70.00   Max.   :137.00   Max.   :99.00  \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate gender percentages\ngender_counts <- table(customer_data$Gender)\ngender_pct <- round(gender_counts / sum(gender_counts) * 100)\ngender_labels <- paste(names(gender_counts), gender_pct, \"%\", sep = \" \")\n\n# Set color palette\ncolors <- c(\"#336699\", \"#99CCFF\")\n\n# Create a data frame for the chart\ngender_data <- data.frame(gender = names(gender_counts), count = gender_counts) %>%\n  mutate(label = gender_labels)\n\n# Create a bar plot to visualize the gender variable\ngender_plot <- ggplot(gender_data, aes(x = gender, y = gender_counts, fill = gender)) +\n  geom_bar(stat = \"identity\", width = 0.6, color = \"white\") +\n  theme_minimal() +\n  scale_fill_manual(values = colors) +\n  labs(x = \"\", y = \"Count\", fill = \"\") +\n  geom_text(aes(label = label), position = position_stack(vjust = 0.5)) +\n  ggtitle(\"Gender Distribution\") +\n  theme(plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n        axis.text = element_text(size = 12),\n        axis.title = element_text(size = 14, face = \"bold\"),\n        legend.position = \"none\")\n\n# Plot age distribution with modified binwidth\nage_plot <- ggplot(customer_data, aes(x = Age)) +\n  geom_histogram(binwidth = 5, fill = \"#336699\", color = \"white\") +\n  labs(x = \"Age\", y = \"Frequency\") +\n  ggtitle(\"Age Distribution\") +\n  theme_minimal() +\n  theme(plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n        axis.text = element_text(size = 12),\n        axis.title = element_text(size = 14, face = \"bold\"))\n\n# Plot annual income distribution with modified binwidth\nincome_plot <- ggplot(customer_data, aes(x = AnnualIncome)) +\n  geom_histogram(binwidth = 10, fill = \"#336699\", color = \"white\") +\n  labs(x = \"Annual Income (k)\", y = \"Frequency\") +\n  ggtitle(\"Annual Income Distribution\") +\n  theme_minimal() +\n  theme(plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n        axis.text = element_text(size = 12),\n        axis.title = element_text(size = 14, face = \"bold\"))\n\n# Plot spending score distribution with modified binwidth\nscore_plot <- ggplot(customer_data, aes(x = SpendingScore)) +\n  geom_histogram(binwidth = 5, fill = \"#336699\", color = \"white\") +\n  labs(x = \"Spending Score\", y = \"Frequency\") +\n  ggtitle(\"Spending Score Distribution\") +\n  theme_minimal() +\n  theme(plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n        axis.text = element_text(size = 12),\n        axis.title = element_text(size = 14, face = \"bold\"))\n\n# Display the plots\nprint(gender_plot)\n```\n\n::: {.cell-output-display}\n![](segmentation_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\nprint(age_plot)\n```\n\n::: {.cell-output-display}\n![](segmentation_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n\n```{.r .cell-code}\nprint(income_plot)\n```\n\n::: {.cell-output-display}\n![](segmentation_files/figure-html/unnamed-chunk-3-3.png){width=672}\n:::\n\n```{.r .cell-code}\nprint(score_plot)\n```\n\n::: {.cell-output-display}\n![](segmentation_files/figure-html/unnamed-chunk-3-4.png){width=672}\n:::\n:::\n\n\n\n## K-means Clustering\n\n#### Silhoutte\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nOptimal_Clusters_KMeans(customer_data %>% \n               select(\"Age\", \"AnnualIncome\", \"SpendingScore\"),\n               max_clusters = 10, plot_clusters = T, criterion = 'silhouette')\n```\n\n::: {.cell-output-display}\n![](segmentation_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] 0.0000000 0.2931661 0.3839350 0.3923693 0.4269573 0.4523444 0.4132930\n [8] 0.3969484 0.3791567 0.3747368\n```\n:::\n:::\n\n#### WCSSE\n\n\n::: {.cell}\n\n```{.r .cell-code}\nOptimal_Clusters_KMeans <- function(data, max_clusters, plot_clusters = TRUE, criterion = 'WCSSE') {\n  set.seed(123)\n  \n  # Function to calculate the total within-cluster sum of squares error (WCSSE)\n  calculate_wcsse <- function(k) {\n    kmeans_result <- kmeans(data, k)\n    return(kmeans_result$tot.withinss)\n  }\n  \n  # Calculate the WCSSE for each number of clusters\n  wcsse_values <- sapply(1:max_clusters, calculate_wcsse)\n  \n  if (plot_clusters) {\n    # Plot the WCSSE values\n    plot(1:max_clusters, wcsse_values,\n         type = \"b\", pch = 19, frame = FALSE, \n         xlab = \"Number of clusters (K)\",\n         ylab = \"Total within-cluster sum of squares error (WCSSE)\")\n  }\n  \n  # Determine the optimal number of clusters based on the criterion\n  if (criterion == 'WCSSE') {\n    optimal_clusters <- which.min(wcsse_values)\n    message(\"The optimal number of clusters based on WCSSE is \", optimal_clusters)\n  } else {\n    # Add additional criteria here\n    message(\"Invalid criterion specified.\")\n    return(NULL)\n  }\n  \n  return(optimal_clusters)\n}\n\n# Usage example\noptimal_clusters <- Optimal_Clusters_KMeans(customer_data %>% \n                                             select(\"Age\", \"AnnualIncome\", \"SpendingScore\"),\n                                           max_clusters = 10, plot_clusters = TRUE, criterion = 'WCSSE')\n```\n\n::: {.cell-output-display}\n![](segmentation_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncust_kmean <- eclust(customer_data %>% \n               select(AnnualIncome, SpendingScore, Age),\n               stand = TRUE,FUNcluster = \"kmeans\",k=5,graph = F)\n\naggregate(customer_data %>% \n               select(AnnualIncome, SpendingScore, Age),\n          by =list(gerombol=cust_kmean$cluster), FUN = mean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  gerombol AnnualIncome SpendingScore      Age\n1        1     50.10638      43.61702 27.51064\n2        2     48.48276      41.77586 55.55172\n3        3     25.72727      79.36364 25.27273\n4        4     88.93939      16.96970 41.93939\n5        5     86.10000      81.52500 32.87500\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define a custom color palette\nmy_colors <- c(\"#1f77b4\", \"#ff7f0e\", \"#2ca02c\", \"#d62728\", \"#9467bd\")\n\n# Visualize the clustering results with improved theme and custom colors\nfviz_cluster(cust_kmean, geom = \"point\", pointsize = 2) +\ntheme_minimal() +\n  theme(plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n        axis.text = element_text(size = 12),\n        axis.title = element_text(size = 14, face = \"bold\"))+  scale_fill_manual(values = my_colors)\n```\n\n::: {.cell-output-display}\n![](segmentation_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n## Findings\n\n\"Young and Moderate Income\" Cluster: This cluster consists of young individuals with a moderate income level and average spending behavior. To target this segment effectively, the marketing manager can focus on offering affordable products or services that align with the interests and preferences of this younger demographic. Promotional campaigns that highlight value for money, convenience, and trendy features could resonate well with this cluster.\n\n\"Middle-Aged and Moderate Income\" Cluster: This cluster represents middle-aged individuals with moderate incomes and average spending habits. The marketing manager can target this segment by emphasizing quality, durability, and reliability in their products or services. Highlighting the long-term value and practicality of the offerings can be effective in capturing the attention of this cluster.\n\n\"Young and High Spending\" Cluster: Despite their lower incomes, individuals in this cluster exhibit a tendency for high spending. The marketing manager can capitalize on this by offering attractive financing options, discounts, or loyalty programs that reward their spending. Promoting exclusive or unique experiences can also appeal to this segment, as they may prioritize indulgence and personal enjoyment.\n\n\"Middle-Aged and Conservative Spending\" Cluster: With higher incomes but conservative spending habits, this cluster values financial stability and savings. The marketing manager can position products or services as long-term investments or solutions that offer cost savings in the long run. Emphasizing features such as durability, reliability, and cost-effectiveness can be effective in attracting this cluster.\n\n\"Young and High Income\" Cluster: This cluster represents young individuals with high incomes and high spending scores. The marketing manager can focus on luxury, prestige, and personalized experiences to appeal to this affluent segment. Tailored marketing campaigns, exclusive offers, and high-end branding can effectively capture the attention and loyalty of this cluster.\n\nIt's important to further analyze the clusters and their characteristics in order to refine these recommendations and tailor them to the specific goals and objectives of the marketing manager and the business. Additionally, conducting market research and gathering customer insights will provide a more comprehensive understanding of each cluster's preferences and behaviors, enabling the marketing manager to create targeted and impactful marketing strategies.",
    "supporting": [
      "segmentation_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}