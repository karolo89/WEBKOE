{"title":"Hurricanes","markdown":{"yaml":{"title":"Hurricanes","author":"Karol Orozco","date":"2023/02/05","image":"hurricane.png","format":{"html":{"toc":true,"toc-location":"right","html-math-method":"katex","page-layout":"full"}},"execute":{"warning":false,"message":false},"categories":["R","Data Viz","Data For Good"]},"headingText":"library(ggplot2)","containsRefs":false,"markdown":"\n\n\nHello there,\n\nToday, I will be recreating the graph from the article [\"Why Past Hurricane Seasons Don't Tell Us Much About The Future\"](https://fivethirtyeight.com/features/why-past-hurricane-seasons-dont-tell-us-much-about-the-future/) by Anna Wiederkehr.\n\nYou can find the raw data in the National Oceanic and Atmospheric Administration's HURDAT2 database, which has records of all Atlantic basin tropical cyclones dating back to 1851.\n\nThis exercise focuses on practicing our data visualization skills with ggplot2, so I'll skip the data manipulation steps. You can find the dataset for the graph in my GitHub repository.\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(warning=FALSE, message=FALSE)\n\nlibrary(ggplot2)\nlibrary(geomtextpath)\nlibrary(RCurl)\nlibrary(grid)\nlibrary(gridExtra)\n\n```\n\n```{r}\n\n## library(geomtextpath)\n## library(RCurl)\n## library(grid)\n## library(gridExtra)\n\nx <- getURL(\"https://raw.githubusercontent.com/karolo89/Raw_Data/main/Hurricane.csv\")\nhurricane <- read.csv(text = x)\n\ngraph1 <- ggplot(hurricane, aes(year,average, color = type)) +\n  geom_step(size=.7) +\n  \n## Adding the text\n  geom_textline(aes(label = ifelse(type == \"avg_h_15year\", \n                    \"All Hurricanes\",\n                    \"Major Hurricanes\"), \n                    y = average + .8), \n                text_smoothing = 50, \n                fontface = 2,\n                hjust = 0,  \n                linetype = 0, \n                size = 3) +\n  annotate(\"text\", x = 1886, y = 2.2, label = \"Category 3 - 5\", hjust = 0,\n           color = \"#3b2d74\", size= 2.5) +\n\n## Scales\n  \n  scale_x_continuous(breaks = seq(1860,2020,20)) +\n  scale_y_continuous(limits = c(0,8.5),\n                     breaks = seq(2,8,2),\n                     expand = c(0,0)) +\n  scale_color_manual(values = c(\"#735ad2\", \"#3b2d74\")) +\n\n## Labs\n  \n  labs(\n    y = \" \",\n    x = \" \", \n    title = \"15-year average recorded Atlantic basin hurricanes, 1851-2019\") +\n  \n## Theme \n  \n  theme_minimal() +\n  \n  theme(\n    \n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_blank(),\n    \n    ## Customize x axis\n    axis.ticks.x = element_line(colour = \"#e1e1e1\"),\n    axis.ticks.length.x =unit(0.3,\"cm\"),\n    axis.line.x.bottom = element_line(colour = \"#313131\"),\n    \n    ## axis text\n\n    axis.text = element_text(size= 6, color= \"#8f8f8f\", \n                             face = \"bold\"),\n    \n    ## We don't want a legend\n    \n    legend.position = \"none\",\n    \n    ## title\n    plot.title = element_text(size =8, face = \"bold\", colour= \"#545454\",\n                              hjust = 0.50, vjust = 1)\n  )\ngraph1\n```\n\nI used the [Image Color Picker](https://imagecolorpicker.com/en) tool to get the hex colors from the original graph.\n\nWe are still missing the footer, so let's add it.\n\n```{r}\n\nfooter<- grobTree( \n                  textGrob(\"      FiveThirtyEight\", x=unit(.05, \"npc\"), \n                      gp=gpar(col=\"#868686\", \n                              family=\"sans\", \n                              fontsize= 5.5,\n                              fontface= \"bold\"),\n                      hjust=0,\n                      vjust = -2),\n                  \n                  textGrob(\"SOURCES: HURDAT2, VECCHI ET AL      \",\n                        x=unit(1, \"npc\"), \n                        gp=gpar(col=\"#868686\", \n                                family= \"sans\",\n                                fontsize=5.5,\n                              fontface= \"bold\"),\n                        hjust=1,\n                      vjust = -2))\n                  \n# Plot All Together\n\n plt.final <- grid.arrange(graph1, footer, heights=unit(c(0.72, 0.03), \n                                                    c(\"npc\", \"npc\")))\n\n```\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"message":false,"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"html-math-method":"katex","output-file":"hurricane.html"},"language":{"code-summary":"Behind the Scenes"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.313","editor":"visual","citations-hover":true,"footnotes-hover":true,"theme":{"light":"../../../LightTheme.css","dark":"DarkTheme.scss"},"code-copy":true,"title-block-banner":true,"title":"Hurricanes","author":"Karol Orozco","date":"2023/02/05","image":"hurricane.png","categories":["R","Data Viz","Data For Good"],"toc-location":"right","page-layout":"full"},"extensions":{"book":{"multiFile":true}}}}}